# Generación y ejecución de código usando Simulink Coder

1. Dentro de la máquina virtual, abra dentro de Simulink el archivo *Heli_2dof.slx*, esta es la simulación del controlador de un helicóptero con 2 grados de libertad, el cual se modeló y controló en el Laboratorio de Control Automático.
2. Presione en la pestaña *Simulation* el botón **Run** y abra el *scope4* (el que se encuentra más a la derecha). **Tome una captura de pantalla de las señales generadas**, puede cerrar la ventana.
4. Haga click en **Data Inspector**, en la pestaña de SIMULATION, dentro de la ventana que se abre, en el menú *Inspect*, despliegue el objeto llamado *Signals* y marque las casillas de las 2 señales llamadas *referencia*  y las **DOS** señales de salida, esta señal es en realidad vectorial y contiene 2 señales que puede ver al desplegarlo, haciendo click en la pequeña flecha a la izquierda del nombre, asegúrese de no seleccionar la señal vectorial, sino individualmente las 2 que contiene. **Tome captura de pantalla de la ventana en este punto**. **IMPORTANTE**. No cierre esta ventana, solamente se debe minimizar, más adelante se necesita nuevamente.
5. En la pestaña *APPS*, abra el **Simulink Coder**.
6. Haga click en **Build**, esto generará el código en C y abrirá el reporte del proceso y los códigos generados. Abra el código **Heli_2dof.c** y **tome una captura de pantalla del código**. **IMPORTANTE**, la ventana de reporte se abre antes de que termine el proceso, no la cierre antes de que termine, luego de esto se puede cerrar.
7. Haga click en **Verify Code**, luego **Run on Custom Hardware**. Ya el archivo se configuró para correr el código dentro del computador Host y comunicarse con Simulink para visualizar los resultados de este.
8. Luego del paso anterior se debió abrir la pestaña *HARDWARE*, en esta haga click en **Monitor & Tune**, este proceso puede durar, ya que se generará de nuevo el código y se comunicará con Simulink los resultados. Se abrirá de nuevo una ventana con el reporte, una vez finalizado el proceso se puede cerrar.
9. Abra de nuevo la ventana de **Data Inspector** que tenía minimizada, verá que ahora abrán señales de un *Run 2*, este es el generado por el código C, anteriormente estaba solamente el *Run 1*, que se simuló al inicio.
10. Haga click en **Compare**, en **Baseline** seleccione *Run 1* y en **Compare to** seleccione *Run 2*. Haga click en *[+] More* y en *Absolute* escriba 1e-12, esto define la tolerancia para la comparación. Finalmente haga click en **Compare**. Esto hará la comparación de las señales simuladas con Simulink y con el código C generado con el Simulink Coder.
11. A la izquierda de la ventana, despliegue el objeto *salida* y seleccione alguna de las 2 para ver la respuesta obtenida. **Tome una captura de la ventana en este punto**.